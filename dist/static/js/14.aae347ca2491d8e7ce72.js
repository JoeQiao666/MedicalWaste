webpackJsonp([14],{"+Nbr":function(e,t){},"7Ecm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("83JD"),o=a.n(r);for(var l in r)"default"!==l&&function(e){a.d(t,e,function(){return r[e]})}(l);var s=a("nin0");var n=function(e){a("+Nbr")},i=a("C7Lr")(o.a,s.a,!1,n,"data-v-038fcb3d",null);t.default=i.exports},"83JD":function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var o=a("ryJa");t.default={data:function(){var e;return r(e={loading:!1,loading2:!1,permission:!1,activeName:"1",total:0,cur_page:1,chooseIds:[],tableData:[]},"total",0),r(e,"cur_page",1),r(e,"office",[]),r(e,"types",[]),r(e,"options1",[]),r(e,"options2",[]),r(e,"ruleForm",{departmentId:"",weight:"",typeId:"",opAt:"",recyclerId:"",staffId:""}),r(e,"rules",{departmentId:[{required:!0,message:"请选择科室"}],weight:[{required:!0,message:"请输入重量"}],typeId:[{required:!0,message:"请选择类型"}],opAt:[{required:!0,message:"请输入时间"}],recyclerId:[{required:!0,message:"请选择"}],staffId:[{required:!0,message:"请选择"}]}),e},methods:{handleClick:function(e,t){1==e.index&&this.getData()},formatter:function(e){return o(e.opAt).format("YYYY-MM-DD")},handleCurrentChange:function(e){this.cur_page=e,this.getData()},handleSelectionChange:function(e){var t=e.map(function(e){return e.id});this.chooseIds=t.join(","),console.log(this.chooseIds)},add:function(){var e=this;this.loading=!0,this.$axios({method:"post",url:"/platform/hospital/rubbish/addDo",data:this.ruleForm}).then(function(t){200==t.status?(e.$message.success("操作成功！"),e.loading=!1,e.ruleForm={departmentId:"",weight:"",typeId:"",opAt:"",recyclerId:"",staffId:""},e.$refs.ruleForm.resetFields()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},getDepartment:function(){var e=this;this.$axios({method:"get",url:"/platform/hospital/department/data"}).then(function(t){200==t.status?e.office=t.data.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},getType:function(){var e=this;this.$axios({method:"get",url:"/platform/hospital/type/data"}).then(function(t){200==t.status?e.types=t.data.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},getPerson:function(){var e=this;this.$axios({method:"get",url:"/platform/sys/user/data?roleId=1"}).then(function(t){200==t.status?e.options1=t.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)}),this.$axios({method:"get",url:"/platform/sys/user/data?roleId=0"}).then(function(t){200==t.status?e.options2=t.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},addIns:function(){var e=this;this.loading=!0,this.$axios({method:"put",url:"/platform/hospital/rubbish/store?ids="+this.chooseIds}).then(function(t){200==t.status?(e.loading=!1,e.$message.success(t.data.msg),e.getData()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},addIn:function(e){if(1==e){var t=this.tableData.map(function(e){return e.id});this.chooseIds=t.join(",")}this.addIns()},getData:function(){var e=this;this.loading=!0,this.$axios({method:"get",url:"/platform/hospital/rubbish/listPage?isBottle=true&pageNumber="+this.cur_page+"&pageSize=10&status=0"}).then(function(t){200==t.status?(e.loading=!1,e.tableData=t.data.list,e.total=t.data.totalCount):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}},mounted:function(){this.permission=localStorage.permission,this.getDepartment(),this.getType(),this.getPerson()}}},nin0:function(e,t,a){"use strict";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-location-outline"}),e._v(" 系统管理\n      ")]),e._v(" "),a("el-breadcrumb-item",[e._v("\n          补操作\n      ")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"补新增",name:"1"}},[a("el-form",{ref:"ruleForm",staticClass:"new",staticStyle:{width:"50%",margin:"auto"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"科室：",prop:"departmentId",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择科室"},model:{value:e.ruleForm.departmentId,callback:function(t){e.$set(e.ruleForm,"departmentId",t)},expression:"ruleForm.departmentId"}},e._l(e.office,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"重量(KG)",prop:"weight",required:""}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.weight,callback:function(t){e.$set(e.ruleForm,"weight",t)},expression:"ruleForm.weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"typeId",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.typeId,callback:function(t){e.$set(e.ruleForm,"typeId",t)},expression:"ruleForm.typeId"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产生时间",prop:"opAt",required:""}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.opAt,callback:function(t){e.$set(e.ruleForm,"opAt",t)},expression:"ruleForm.opAt"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回收员：",prop:"recyclerId",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.recyclerId,callback:function(t){e.$set(e.ruleForm,"recyclerId",t)},expression:"ruleForm.recyclerId"}},e._l(e.options1,function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"交接人：",prop:"staffId",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.staffId,callback:function(t){e.$set(e.ruleForm,"staffId",t)},expression:"ruleForm.staffId"}},e._l(e.options2,function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1)],1),e._v(" "),"修改"==e.permission?a("el-button",{staticStyle:{margin:"30px auto 0",display:"block"},attrs:{type:"primary"},on:{click:e.add}},[e._v("确认新增")]):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"补入库",name:"2"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opAt",align:"center",formatter:e.formatter,label:"产生时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",align:"center",sortable:"",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",align:"center",sortable:"",label:"重量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentName",align:"center",sortable:"",label:"科室"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{attrs:{align:"center"}},["修改"==e.permission?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addIn(1)}}},[e._v("全部入库")]):e._e(),e._v(" "),"修改"==e.permission?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addIn(2)}}},[e._v("确认入库")]):e._e()],1)],1)],1)],1)])])},staticRenderFns:[]};t.a=r}});
//# sourceMappingURL=14.aae347ca2491d8e7ce72.js.map