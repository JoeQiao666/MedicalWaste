webpackJsonp([18],{"8oth":function(t,e){},PVAL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("ryJa");var i={data:()=>({loading:!1,loading1:!1,delVisible:!1,permission:!1,kName:"",mTitle:"新增",tableData:[],total:0,cur_page:1,editVisible:!1,ruleForm:{name:"",roleName:""},rules:{name:[{required:!0,message:"请输入岗位名称"}],roleName:[{required:!0,message:"请选择"}]},role:[]}),methods:{handleCurrentChange(t){this.cur_page=t,this.getData()},search(){console.log(this.date)},openAdd(t,e){if(this.loading1=!1,1==t)this.mTitle="新增",this.ruleForm={name:"",roleName:""},this.$refs.ruleForm&&this.$refs.ruleForm.resetFields();else{this.mTitle="详情";var a=this.ruleForm;for(var i in e)a[i]=e[i];this.ruleForm=a}this.editVisible=!0},detials(t,e){this.openAdd(2,e)},saveEdit(t){this.$refs[t].validate(t=>{if(!t)return!1;"新增"==this.mTitle?this.add():this.edit()})},add(){this.loading1=!0,this.$axios({method:"post",url:"/platform/hospital/position/addDo",data:this.ruleForm}).then(t=>{0==t.data.code?(this.loading1=!1,this.editVisible=!1,this.getData()):this.$message.error(t.data.msg)}).catch(t=>{console.log(t)})},edit(){this.loading1=!0,this.$axios({method:"put",url:"/platform/hospital/position/editDo",data:this.ruleForm}).then(t=>{0==t.data.code?(this.loading1=!1,this.editVisible=!1,this.getData()):this.$message.error(t.data.msg)}).catch(t=>{console.log(t)})},deleteRow(){this.$axios({method:"DELETE",url:"/platform/hospital/position/delete?ids="+this.id}).then(t=>{200==t.status?(this.$message.success("删除成功"),this.delVisible=!1,this.getData()):this.$message.error(t.data.msg)}).catch(t=>{console.log(t)})},deal(t,e){this.id=e.id,this.delVisible=!0},getData(){this.loading=!0,this.$axios({method:"get",url:"/platform/hospital/position/listPage?pageNumber="+this.cur_page+"&pageSize=10&name="+this.kName}).then(t=>{200==t.status?(this.loading=!1,this.tableData=t.data.list,this.total=t.data.totalCount):this.$message.error(t.data.msg)}).catch(t=>{console.log(t)})},getRole(){this.$axios({method:"get",url:" /platform/sys/role/data"}).then(t=>{200==t.status?this.role=t.data.data:this.$message.error(t.data.msg)}).catch(t=>{console.log(t)})}},mounted(){this.permission=localStorage.permission,this.getData(),this.getRole()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-location-outline"}),t._v(" 角色管理\n      ")]),t._v(" "),a("el-breadcrumb-item",[t._v("岗位列表")])],1)],1),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"borderBox"},[a("div",{staticClass:"flex headSelect",staticStyle:{"margin-bottom":"10px"}},[t._m(0),t._v(" "),a("div",{staticClass:"flex funcHead"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration",staticStyle:{"margin-left":"10px"}},[t._v("岗位名称：")]),t._v(" "),a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入岗位名称"},model:{value:t.kName,callback:function(e){t.kName=e},expression:"kName"}})],1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v("搜索")]),t._v(" "),"修改"==t.permission?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.openAdd(1,t.row)}}},[t._v("新增")]):t._e()],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"岗位名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["修改"==t.permission?a("span",{staticClass:"pointer",on:{click:function(a){return t.detials(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),"修改"==t.permission?a("span",{staticClass:"pointer",staticStyle:{"margin-left":"10px"},on:{click:function(a){return t.deal(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.mTitle,visible:t.editVisible,width:"40%"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"岗位名称：",prop:"name",required:""}},[a("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色名称：",prop:"roleId",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色"},model:{value:t.ruleForm.roleId,callback:function(e){t.$set(t.ruleForm,"roleId",e)},expression:"ruleForm.roleId"}},t._l(t.role,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveEdit("ruleForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex"},[e("img",{staticClass:"titleIcon",attrs:{src:a("rfL+"),alt:""}}),this._v(" "),e("div",{staticStyle:{"margin-top":"-4px"}},[this._v("岗位列表")])])}]};var s=a("C7Lr")(i,l,!1,function(t){a("8oth")},"data-v-0a922e76",null);e.default=s.exports}});
//# sourceMappingURL=18.f75a3799c5a03f03a68b.js.map